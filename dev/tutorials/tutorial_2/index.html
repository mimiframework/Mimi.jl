<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>2 Run an Existing Model · Mimi.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">Mimi.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Tutorials</span><ul><li><a class="tocitem" href="../tutorial_main/">Tutorials Intro</a></li><li><a class="tocitem" href="../tutorial_1/">1 Install Mimi</a></li><li class="is-active"><a class="tocitem" href>2 Run an Existing Model</a></li><li><a class="tocitem" href="../tutorial_3/">3 Modify an Existing Model</a></li><li><a class="tocitem" href="../tutorial_4/">4 Create a Model</a></li><li><a class="tocitem" href="../tutorial_5/">5 Monte Carlo + Sensitivity Analysis</a></li><li><a class="tocitem" href="../tutorial_6/">6 Create a Model with Composite Components</a></li></ul></li><li><span class="tocitem">How-to Guides</span><ul><li><a class="tocitem" href="../../howto/howto_main/">How-to Guides Intro</a></li><li><a class="tocitem" href="../../howto/howto_1/">1 Construct + Run a Model</a></li><li><a class="tocitem" href="../../howto/howto_2/">2 Explore Results</a></li><li><a class="tocitem" href="../../howto/howto_3/">3 Monte Carlo + SA</a></li><li><a class="tocitem" href="../../howto/howto_4/">4 Timesteps</a></li><li><a class="tocitem" href="../../howto/howto_5/">5 Parameters + Variables</a></li><li><a class="tocitem" href="../../howto/howto_6/">6 Update Time Dimension</a></li><li><a class="tocitem" href="../../howto/howto_7/">7 Port to v0.5.0</a></li><li><a class="tocitem" href="../../howto/howto_8/">8 Port to v1.0.0</a></li><li><a class="tocitem" href="../../howto/howto_9/">9 Port to New Param API</a></li></ul></li><li><span class="tocitem">Advanced How-to Guides</span><ul><li><a class="tocitem" href="../../howto_advanced/howto_adv_main/">Advanced How-to Guides Intro</a></li><li><a class="tocitem" href="../../howto_advanced/howto_adv_buildinit/">Build and Init Functions</a></li><li><a class="tocitem" href="../../howto_advanced/howto_adv_datumrefs/">Using Datum References</a></li></ul></li><li><span class="tocitem">Reference Guides</span><ul><li><a class="tocitem" href="../../ref/ref_main/">Reference Guides Intro</a></li><li><a class="tocitem" href="../../ref/ref_API/">Mimi API</a></li><li><a class="tocitem" href="../../ref/ref_structures_classes_types/">Structures: Classes.jl and Types</a></li><li><a class="tocitem" href="../../ref/ref_structures_definitions/">Structures: Definitions</a></li><li><a class="tocitem" href="../../ref/ref_structures_instances/">Structures: Instances</a></li></ul></li><li><span class="tocitem">Explanations</span><ul><li><a class="tocitem" href="../../explanations/exp_main/">Explanations Intro</a></li><li><a class="tocitem" href="../../explanations/exp_pkgs/">Models as Packages</a></li></ul></li><li><a class="tocitem" href="../../faq/">FAQ</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Tutorials</a></li><li class="is-active"><a href>2 Run an Existing Model</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>2 Run an Existing Model</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/mimiframework/Mimi.jl/blob/master/docs/src/tutorials/tutorial_2.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Tutorial-2:-Run-an-Existing-Model-1"><a class="docs-heading-anchor" href="#Tutorial-2:-Run-an-Existing-Model-1">Tutorial 2: Run an Existing Model</a><a class="docs-heading-anchor-permalink" href="#Tutorial-2:-Run-an-Existing-Model-1" title="Permalink"></a></h1><p>This tutorial walks through the steps to download, run, and view the output of an existing model.  There are several existing models publically available on Github, and for the purposes of this tutorial we will use <a href="http://www.fund-model.org">The Climate Framework for Uncertainty, Negotiation and Distribution (FUND)</a>, available on Github <a href="https://github.com/fund-model/fund">here</a>.</p><p>Working through the following tutorial will require:</p><ul><li><a href="https://julialang.org/downloads/">Julia v1.4.0</a> or higher</li><li><a href="https://github.com/mimiframework/Mimi.jl">Mimi v0.10.0</a> or higher</li><li>connection of your julia installation with the central Mimi registry of Mimi models</li></ul><p><strong>If you have not yet prepared these, go back to the first tutorial to set up your system.</strong></p><h4 id="Step-1.-Download-FUND-1"><a class="docs-heading-anchor" href="#Step-1.-Download-FUND-1">Step 1. Download FUND</a><a class="docs-heading-anchor-permalink" href="#Step-1.-Download-FUND-1" title="Permalink"></a></h4><p>The first step in this process is downloading the FUND model, which is now made easy with the Mimi registry. Assuming you have already done the one-time run of the following command to connect your julia installation with the central Mimi registry of Mimi models, as instructed in the first tutorial,</p><pre><code class="language-julia">pkg&gt; registry add https://github.com/mimiframework/MimiRegistry.git</code></pre><p>you simply need to add the FUND model in the Pkg REPL with:</p><pre><code class="language-julia">pkg&gt; add MimiFUND</code></pre><h4 id="Step-2.-Run-FUND-1"><a class="docs-heading-anchor" href="#Step-2.-Run-FUND-1">Step 2. Run FUND</a><a class="docs-heading-anchor-permalink" href="#Step-2.-Run-FUND-1" title="Permalink"></a></h4><p>The next step is to run FUND. If you wish to first get more acquainted with the model itself, take a look at the provided online <a href="http://www.fund-model.org">documentation</a>.</p><p>Now open a julia REPL and type the following command to load the MimiFUND package into the current environment:</p><pre><code class="language-julia">using MimiFUND</code></pre><p>Now we can access the public API of FUND, including the function <code>MimiFUND.get_model</code>. This function returns a copy of the default FUND model. Here we will first get the model, and then use the <a href="../../ref/ref_API/#Base.run"><code>run</code></a> function to run it.</p><pre><code class="language-julia">m = MimiFUND.get_model()
run(m)</code></pre><p>These steps should be relatively consistent across models, where a repository for <code>ModelX</code> should contain a primary file <code>ModelX.jl</code> which exports, at minimum, a function named something like <code>get_model</code> or <code>construct_model</code> which returns a version of the model, and can allow for model customization within the call.</p><p>In the MimiFUND package, the function <code>get_model</code> has the signature</p><pre><code class="language-julia">get_model(; nsteps = default_nsteps, datadir = default_datadir, params = default_params)</code></pre><p>Thus there are no required arguments, although the user can input <code>nsteps</code> to define the number of timesteps (years in this case) the model runs for, <code>datadir</code> to define the location of the input data, and <code>params</code>, a dictionary definining the parameters of the model.  For example, if you wish to run only the first 200 timesteps, you may use:</p><pre><code class="language-julia">using MimiFUND
m = MimiFUND.get_model(nsteps = 200)
run(m)</code></pre><h4 id="Step-3.-Access-Results:-Values-1"><a class="docs-heading-anchor" href="#Step-3.-Access-Results:-Values-1">Step 3. Access Results: Values</a><a class="docs-heading-anchor-permalink" href="#Step-3.-Access-Results:-Values-1" title="Permalink"></a></h4><p>After the model has been run, you may access the results (the calculated variable values in each component) in a few different ways.</p><p>Start off by importing the Mimi package to your space with</p><pre><code class="language-julia">using Mimi</code></pre><p>First of all, you may use the <code>getindex</code> syntax as follows:</p><pre><code class="language-julia">m[:ComponentName, :VariableName] # returns the whole array of values
m[:ComponentName, :VariableName][100] # returns just the 100th value
</code></pre><p>Indexing into a model with the name of the component and variable will return an array with values from each timestep. You may index into this array to get one value (as in the second line, which returns just the 100th value). Note that if the requested variable is two-dimensional, then a 2-D array will be returned. For example, try taking a look at the <code>income</code> variable of the <code>socioeconomic</code> component of FUND using the code below:</p><pre><code class="language-julia">m[:socioeconomic, :income]
m[:socioeconomic, :income][100]</code></pre><p>You may also get data in the form of a dataframe, which will display the corresponding index labels rather than just a raw array. The syntax for this uses <a href="../../ref/ref_API/#Mimi.getdataframe"><code>getdataframe</code></a> as follows:</p><pre><code class="language-julia">getdataframe(m, :ComponentName=&gt;:Variable) # request one variable from one component
getdataframe(m, :ComponentName=&gt;(:Variable1, :Variable2)) # request multiple variables from the same component
getdataframe(m, :Component1=&gt;:Var1, :Component2=&gt;:Var2) # request variables from different components</code></pre><p>Try doing this for the <code>income</code> variable of the <code>socioeconomic</code> component using:</p><pre><code class="language-julia">getdataframe(m, :socioeconomic=&gt;:income) # request one variable from one component
getdataframe(m, :socioeconomic=&gt;:income)[1:16,:] # results for all regions in first year (1950)</code></pre><h4 id="Step-4.-Access-Results:-Plots-and-Graphs-1"><a class="docs-heading-anchor" href="#Step-4.-Access-Results:-Plots-and-Graphs-1">Step 4. Access Results: Plots and Graphs</a><a class="docs-heading-anchor-permalink" href="#Step-4.-Access-Results:-Plots-and-Graphs-1" title="Permalink"></a></h4><p>After running the FUND model, you may also explore the results using plots and graphs.</p><p>Mimi provides support for plotting using <a href="https://github.com/vega/vega-lite">VegaLite</a> and <a href="https://github.com/fredo-dedup/VegaLite.jl">VegaLite.jl</a> within the Mimi Explorer UI.</p><h4 id="Explore-1"><a class="docs-heading-anchor" href="#Explore-1">Explore</a><a class="docs-heading-anchor-permalink" href="#Explore-1" title="Permalink"></a></h4><p>If you wish to explore the results graphically, use the explorer UI. This functionality is described in more detail in the second how-to guide, How-to Guide 2: View and Explore Model Results. For now, however, you don&#39;t need this level of detail and can simply follow the steps below.</p><p>To explore all variables and parameters of FUND in a dynamic UI app window, use the <a href="../../ref/ref_API/#Mimi.explore"><code>explore</code></a> function called with the model as the required first argument.  The menu on the left hand side will list each element in a label formatted as <code>component: variable/parameter</code>.</p><pre><code class="language-julia">explore(m)</code></pre><p>Alternatively, in order to view just one parameter or variable, call the function <a href="../../ref/ref_API/#Mimi.explore"><code>explore</code></a> as below to return a plot object and automatically display the plot in a viewer, assuming <a href="../../ref/ref_API/#Mimi.explore"><code>explore</code></a> is the last command executed.  This call will return the type <code>VegaLite.VLSpec</code>, which you may interact with using the API described in the <a href="https://github.com/fredo-dedup/VegaLite.jl">VegaLite.jl</a> documentation.  For example, <a href="https://github.com/fredo-dedup/VegaLite.jl">VegaLite.jl</a> plots can be saved as <a href="https://en.wikipedia.org/wiki/Portable_Network_Graphics">PNG</a>, <a href="https://en.wikipedia.org/wiki/Scalable_Vector_Graphics">SVG</a>, <a href="https://en.wikipedia.org/wiki/PDF">PDF</a> and <a href="https://en.wikipedia.org/wiki/Encapsulated_PostScript">EPS</a> files. You may save a plot using the <code>save</code> function. </p><p>Note that saving an interactive plot in a non-interactive file format, such as .pdf or .svg will result in a warning <code>WARN Can not resolve event source: window</code>, but the plot will be saved as a static image. If you wish to preserve interactive capabilities, you may save it using the .vegalite file extension. If you then open this file in Jupyter lab, the interactive aspects will be preserved.</p><pre><code class="language-julia">p = Mimi.plot(m, :mycomponent, :myvariable)
save(&quot;MyFilePath.svg&quot;, p)</code></pre><p>More specifically for our tutorial use of FUND, try:</p><pre><code class="language-julia">p = Mimi.plot(m, :socioeconomic, :income)
save(&quot;MyFilePath.svg&quot;, p)</code></pre><hr/><p>You&#39;re done!  Now feel free to move on to the next tutorial, which will go into depth on how to <strong>modify</strong> an existing model such as FUND.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../tutorial_1/">« 1 Install Mimi</a><a class="docs-footer-nextpage" href="../tutorial_3/">3 Modify an Existing Model »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 20 July 2022 20:21">Wednesday 20 July 2022</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
